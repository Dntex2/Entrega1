<ion-header>
  <ion-toolbar>
    <ion-title>Por favor escanea el QR en pantalla</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content fullscreen>
  <!-- Contenedor principal -->
  <div id="container">
    <!-- Mostrar resultado cuando no está escaneando -->
    <ion-card *ngIf="!qr.scan">
      <ion-card-header>
        <ion-card-title>Resultado del QR</ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <p *ngIf="qr.scanResult">Contenido: {{ qr.scanResult }}</p>
        <div *ngIf="objetoJson">
          <strong>Objetos QR:</strong>
          <ul>
            <li *ngFor="let data of JsonData">{{ data }}</li>
          </ul>
        </div>
        <p *ngIf="!qr.scanResult && !objetoJson">No hay datos escaneados.</p>
      </ion-card-content>
    </ion-card>

    <!-- Mostrar cámara y botón de flash cuando está escaneando -->
    <div *ngIf="qr.scan" style="background-color: transparent;">
      <ion-card id="qr_card">
        <p style="text-align: center; color: gray;">Escaneando...</p>
      </ion-card>
      <ion-button expand="block" color="primary" fill="outline" size="medium" (click)="Flashlight()">
        Flash
      </ion-button>
    </div>

    <!-- Lista de estudiantes registrados -->
    <ion-card>
      <ion-card-header>
        <ion-card-title>Lista de Estudiantes</ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <ion-list>
          <ion-item *ngFor="let student of students">
            <ion-label>
              <h2>{{ student.name }}</h2>
              <p>Correo: {{ student.email }}</p>
              <p>Edad: {{ student.age }}</p>
              <p>Grado: {{ student.grade }}</p>
            </ion-label>
          </ion-item>
        </ion-list>
        <p *ngIf="students.length === 0" style="text-align: center; color: gray;">
          No hay estudiantes registrados.
        </p>
      </ion-card-content>
    </ion-card>
  </div>

  <!-- Botón flotante para iniciar el escaneo -->
  <ion-fab slot="fixed" vertical="bottom" horizontal="end">
    <ion-fab-button (click)="Scaneo()">
      <ion-icon name="scan"></ion-icon>
    </ion-fab-button>

    <!-- Botón flotante para agregar estudiante manualmente -->
    <ion-fab-button (click)="goToAddStudent()" color="secondary" style="margin-bottom: 70px;">
      <ion-icon name="person-add"></ion-icon>
    </ion-fab-button>
  </ion-fab>
</ion-content>

<!-- Barra de navegación inferior fija -->
<ion-tabs>
  <ion-tab-bar slot="bottom" class="static-tab-bar">
    <ion-tab-button tab="home" routerLink="/inicio">
      <ion-icon name="home-outline"></ion-icon>
      <ion-label>Inicio</ion-label>
    </ion-tab-button>
    <ion-tab-button tab="clases" routerLink="/attendance">
      <ion-icon name="book-outline"></ion-icon>
      <ion-label>Clases</ion-label>
    </ion-tab-button>
    <ion-tab-button tab="qr" routerLink="/qr">
      <ion-icon name="qr-code-outline"></ion-icon>
      <ion-label>QR</ion-label>
    </ion-tab-button>
    <ion-tab-button tab="profile" routerLink="/profile">
      <ion-icon name="person-circle-outline"></ion-icon>
      <ion-label>Perfil</ion-label>
    </ion-tab-button>
  </ion-tab-bar>
</ion-tabs>
